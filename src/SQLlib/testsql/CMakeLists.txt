
set( project pssqlcmd )

set(BASE_SOURCES
    sqlcmd.c
)


sack_add_executable(${project} ${BASE_SOURCES} )
SET_TARGET_PROPERTIES(${project} PROPERTIES
                  FOLDER utils
)
target_link_libraries( ${project} ${SACK_LIBRARIES} ${SACK_PSI_LIBRARY} )
install_default_dest( ${project} )

set( SOURCES_ROOT ${CMAKE_CURRENT_SOURCE_DIR}/../../../ )

set( K12_SOURCES
  ${SOURCES_ROOT}src/contrib/K12/lib/KangarooTwelve.c 
  ${SOURCES_ROOT}src/contrib/K12/lib/KangarooTwelve.h
  ${SOURCES_ROOT}src/contrib/K12/lib/brg_endian.h 
)
set( K12_INCLUDES ${SOURCES_ROOT}/src/contrib/K12/lib )


string( REPLACE ";" " " K12_SOURCES_ARG "${K12_SOURCES}" )
string( REPLACE ";" " " K12_INCLUDE_ARG "${K12_INCLUDES}" )
string( REPLACE ";" " " PLATFORM_LIBRARIES_ARG "${SACK_PLATFORM_LIBRARIES}" )
string( REPLACE ";" " " PLATFORM_DEFINES_ARG "${PLATFORM_DEFINES}" )
string( REPLACE ";" "," PLATFORM_CMAKE_DEFINES_ARG "${PLATFORM_CMAKE_DEFINES}" )

ExternalProject_Add( ${project}_portable 
	SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/portable
	INSTALL_DIR ${CMAKE_INSTALL_PREFIX}
	CMAKE_ARGS -DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR> 
		-DCMAKE_BUILD_TYPE:PATH=${CMAKE_BUILD_TYPE} 
		-DSACK_BASE=${SACK_BASE}
		-DPLATFORM_LIBRARIES=${PLATFORM_LIBRARIES_ARG}
		-DPLATFORM_DEFINES=${PLATFORM_DEFINES_ARG}
		-DPLATFORM_CMAKE_DEFINES=${PLATFORM_CMAKE_DEFINES_ARG}
		-DSHA1_SOURCES=${SHA1_SOURCES}
		-DSHA2_SOURCES=${SHA2_SOURCES}
		-DSHA3_SOURCES=${SHA3_SOURCES}
		-DK12_SOURCES=${K12_SOURCES_ARG}
		-DK12_INCLUDES=${K12_INCLUDE_ARG}
)
#add_subdirectory( portable )



